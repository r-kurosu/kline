\chapter{提案手法}\label{method}
本章では, 第3章で定式化した二段階の問題についてそれぞれの問題に対する提案手法を説明する. 

\section{第一段階}
求解には整数計画ソルバー (Gurobi Optimizer ver. 9.5)を用いた. 
第二段階では, この時の出力結果を利用する.  

\section{第二段階}
\subsection*{bottom-left法}
bottom-left法 (BL法)とは長方形詰込み問題に対するアルゴリズムの一つで, 配置可能な領域の内, 最も下に, 同じ高さの候補があれば, 最も左に配置する手法である\cite{nfp2}. 
面積の大きい順にパッキングするといったように, 詰め込む順番を工夫することで有用な解が得られるとされている. \\


本研究では, 車の駐車向きを考慮し, 搬出時ランプに向かって前向きに発進できるようにBL法を修正し, 詰め込みを行った. 
各グループ内で, 全長の大きいもの, その中でも幅の大きいものを先に, そして同じ車種が連続するような順番で詰め込みを行った. 
グループ間の詰め込みの順番としては, 積み地の早い順, 積み地が同じ場合, 揚げ地の遅い順に詰め込みを行った. 

グループ内の全ての車が詰め終わるか, 詰め込み途中で, グループ内のどの車も詰め込むことができない場合, 計算を終了し, 次のグループ内の車の詰め込みを開始した. 

\section{局所探索法}
\subsection*{局所探索法}
ある解$x$に修正を加えることを近傍操作という\cite{local-search}. 
近傍操作により得られる解の集合$N(x)$を近傍と呼ぶ. 
局所探索法は, 適当な初期解から始め, 現在の解$x$よりも良い解$x'$が近傍$N(x)$内に存在すれば, $x:=x'$と置き換える操作を可能な限り繰り返す方法である. \\

本研究では, 二段階により得られた初期解に近傍操作を加え改善を行う手法を提案する. 
評価関数としては, 詰め込むことのできた車の台数を用いる. \\
近傍操作では, 第一段階で決めたグループの大きさを変更する. 
隣接する2つのグループ$i,j$を比較し, グループ$i$では全ての車が詰め終わり, グループ$j$では詰め込むことのできなかった車が存在するとする. 
このとき, グループ$i$の面積を少し小さくし, グループ$j$の面積を少し大きくする. 
ここで変化させる面積はグループ$j$で詰め込むことのできなかった車の総面積分とする. 
以上の近傍操作を加えたのち, 再度, 第二段階の手法を用いて車を詰め込み, 最終的に詰め込むことのできた車の台数を元の解と比較する. 

